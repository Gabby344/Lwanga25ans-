<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>25 ans de lumière — Témoignages ISC Lwanga</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/style.css" />

  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore-compat.js"></script>
</head>
<body>

  <header>
    <div class="navbar">
      <div class="logo">Institut Saint Charles Lwanga</div>
      <div class="hamburger" onclick="toggleMenu()">☰</div>
    </div>
    <nav class="menu" id="menu">
      <ul>
        <li><a href="#top">🏠 Accueil</a></li>
        <li><a href="livre.html">📖 Livre des témoignages</a></li>
        <li><a href="about.html">📜 À propos</a></li>
        <li><a href="contact.html">✉️ Contact</a></li>
        <li><a href="galerie.html">📸 Galerie Photo</a></li>
      </ul>
    </nav>
  </header>

  <div class="banner-container" id="top">
    <img src="courlwanga.jpg" alt="Bannière ISC 25 ans" class="banner">
    <div class="banner-text">
      <h2>🎉 25 ans de lumière</h2>
      <p>Un héritage d’excellence, de foi et de fraternité</p>
    </div>
  </div>

  <div class="scrolling-banner">
    <marquee behavior="scroll" direction="left" scrollamount="10">
      <span class="marquee-text">
        🌟 Joyeux 25 ans Saint Charles Lwanga ! 🥳 Merci à tous pour votre soutien ! 🌟 Votre message est précieux. 🥳
      </span>
    </marquee>
  </div>

  <section class="mot-prefet" id="mot-prefet">
    <h2> Mot du Père Michel Lembe Sds</h2>
    <p class="subtitle">Préfet de l’Institut Saint Charles Lwanga</p>
    <div class="mot-container">
      <img src="peremichel.jpg" alt="Père Michel Lembe" class="mot-photo" />
      <div class="mot-box">
        <p>
          « En cette année jubilaire, nous célébrons 25 ans de lumière, de foi et de fraternité.  
          L’Institut Saint Charles Lwanga n’est pas seulement un lieu d’apprentissage,  
          c’est une maison de croissance humaine et spirituelle.  
          Merci à chaque élève, chaque enseignant, chaque ami de l’école  
          qui a contribué à bâtir ce patrimoine vivant.  
          Que cette mémoire nous inspire à aller plus loin, ensemble. »
        </p>
        <p class="signature">— Père Michel Lembe Sds</p>
      </div>
    </div>
  </section>

  <section class="form-section">
    <div class="intro-box">
      <h1>📖 Témoignages pour les 25 ans de l’Institut Saint Charles Lwanga</h1>
      <p class="subtitle">Chaque mot est une lumière. Chaque souvenir est une bénédiction.</p>
      <p class="description">Partage ta gratitude, ton souvenir ou ton message d’encouragement. Ce livre est le reflet de notre histoire commune.</p>
    </div>

    <form id="temoignageForm">
      <div class="form-group">
        <label for="nom">Veuillez saisir votre nom complet</label>
        <input type="text" id="nom" placeholder="Ex : Gabby Umba Kyamitala" required />
      </div>

      <div class="form-group">
        <label for="role">Choisissez...</label>
        <select id="role" required>
          <option value="">Veuillez choisir un rôle</option>
          <option value="Élève Actuel">🎓 Élève Actuel(le)</option>
          <option value="Élève Ancien">🎓 Élève Ancien(ne)</option>
          <option value="Enseignant Actuel">👨‍🏫 Enseignant(e) Actuel(le)</option>
          <option value="Enseignant Ancien">👨‍🏫 Enseignant(e) Ancien(ne)</option>
          <option value="Directeur">👨‍🏫 Directeur (Tous)</option>
          <option value="Préfet">👨‍🏫 Préfet (Tous)</option>
          <option value="Ami de l’école">🤝 Partenaire, Ami(es) de l’école</option>
          <option value="autre">👨🏾‍💼 Autre</option>
        </select>
      </div>

      <div class="form-group double">
        <div>
          <label for="debut">Année de début</label>
          <select id="debut" required><option value="">Année</option></select>
        </div>
        <div>
          <label for="fin">Année de fin</label>
          <select id="fin" required><option value="">Année</option></select>
        </div>
      </div>

      <div class="form-group">
        <label for="message">💬 Veuillez saisir votre message, souvenir ou bénédiction</label>
        <textarea id="message" rows="5" placeholder="Ex : Saint Charles m’a forgé, enseigné, et m’a rendu utile à ma société." required></textarea>
      </div>

      <button type="submit">✨ Appuyez ici pour ajouter votre témoignage</button>
    </form>
  </section>

  <footer>
    <div class="footer-content">
      <p>© 2025 Institut Saint Charles Lwanga</p> <strong>Gabby Umba</strong>
    </div>
  </footer>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAuHPWVOkd96xPqKQ_K1cC4n4ihuPfuNFQ",
      authDomain: "abiga-1718.firebaseapp.com",
      projectId: "abiga-1718",
      storageBucket: "abiga-1718.appspot.com",
      messagingSenderId: "103455679291",
      appId: "1:103455679291:web:eda13441fedfce226d4d1e"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const form = document.getElementById('temoignageForm');
    const debutSelect = document.getElementById('debut');
    const finSelect = document.getElementById('fin');

    for (let y = 2000; y <= 2025; y++) {
      debutSelect.innerHTML += `<option value="${y}">${y}</option>`;
      finSelect.innerHTML += `<option value="${y}">${y}</option>`;
    }

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      const nom = document.getElementById('nom').value.trim();
      const role = document.getElementById('role').value;
      const debut = document.getElementById('debut').value;
      const fin = document.getElementById('fin').value;
      const message = document.getElementById('message').value.trim();

      if (!nom || !role || !debut || !fin || message.length < 5) {
        alert("Merci de remplir tous les champs avec sincérité.");
        return;
      }

      const periode = `${debut}–${fin}`;
      const secretCode = Math.random().toString(36).substring(2, 10);

      try {
        await db.collection("temoignages").add({
          nom,
          role,
          periode,
          message,
          secretCode,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });

        form.reset();
        alert(`✨ Merci pour ton témoignage !\nTon code de modification est : ${secretCode}\nGarde-le précieusement pour modifier ou supprimer ton message.`);
        window.location.href = "livre.html";

      } catch (error) {
        console.error("Erreur lors de l'envoi du témoignage :", error);
        alert("Une erreur s'est produite lors de l'envoi. Veuillez vérifier votre connexion et réessayer.");
      }
    });

    function toggleMenu() {
      const menu = document.getElementById('menu');
      menu.classList.toggle('show');
    }

        document.querySelectorAll('.menu a').forEach(link => {
      link.addEventListener('click', () => {
        document.getElementById('menu').classList.remove('show');
      });
    });
  </script>
</body>
</html>

